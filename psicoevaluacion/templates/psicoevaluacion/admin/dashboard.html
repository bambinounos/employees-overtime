<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel del Evaluador</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #f5f5f5; color: #333; padding: 20px; }
        .container { max-width: 1100px; margin: 0 auto; }
        h1 { font-size: 1.5rem; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; background: #fff; border-radius: 8px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        th { background: #f8f9fa; text-align: left; padding: 12px 16px; font-size: 0.85rem; color: #555; border-bottom: 2px solid #eee; }
        td { padding: 12px 16px; border-bottom: 1px solid #f0f0f0; font-size: 0.9rem; }
        tr:hover td { background: #f8fbff; }
        a { color: #2563eb; text-decoration: none; }
        a:hover { text-decoration: underline; }
        .badge { padding: 3px 10px; border-radius: 12px; font-size: 0.78rem; font-weight: 600; }
        .badge-PENDIENTE { background: #fff3cd; color: #856404; }
        .badge-EN_CURSO { background: #d1ecf1; color: #0c5460; }
        .badge-COMPLETADA { background: #d4edda; color: #155724; }
        .badge-REVISADA { background: #e2d5f1; color: #4a235a; }
        .badge-EXPIRADA { background: #e2e3e5; color: #383d41; }
        .badge-CANCELADA { background: #f8d7da; color: #721c24; }
        .badge-APTO { background: #d4edda; color: #155724; }
        .badge-NO_APTO { background: #f8d7da; color: #721c24; }
        .badge-REVISION { background: #fff3cd; color: #856404; }
        .empty { text-align: center; padding: 40px; color: #999; }
        .admin-link { display: inline-block; margin-bottom: 16px; color: #2563eb; font-size: 0.9rem; }
    </style>
</head>
<body>
<div class="container">
    <a href="/admin/" class="admin-link">&larr; Volver al Admin</a>
    <h1>Panel del Evaluador</h1>

    {% if evaluaciones %}
    <table>
        <thead>
            <tr>
                <th>Candidato</th>
                <th>Cedula</th>
                <th>Cargo</th>
                <th>Estado</th>
                <th>Veredicto</th>
                <th>Fecha</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for ev in evaluaciones %}
            <tr>
                <td><a href="{% url 'psicoevaluacion:detalle_evaluacion' ev.pk %}">{{ ev.nombres }}</a></td>
                <td>{{ ev.cedula }}</td>
                <td>{{ ev.cargo_postulado|default:"-" }}</td>
                <td><span class="badge badge-{{ ev.estado }}">{{ ev.get_estado_display }}</span></td>
                <td>
                    {% if ev.resultado %}
                        <span class="badge badge-{{ ev.resultado.veredicto_final|default:ev.resultado.veredicto_automatico }}">
                            {{ ev.resultado.veredicto_final|default:ev.resultado.veredicto_automatico }}
                        </span>
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>{{ ev.fecha_creacion|date:"d/m/Y H:i" }}</td>
                <td>
                    <a href="{% url 'psicoevaluacion:detalle_evaluacion' ev.pk %}">Ver</a>
                    {% if ev.estado == 'COMPLETADA' or ev.estado == 'REVISADA' %}
                     | <a href="{% url 'psicoevaluacion:revisar_proyectivas' ev.pk %}">Proyectivas</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="empty">No hay evaluaciones registradas.</div>
    {% endif %}
</div>
</body>
</html>
